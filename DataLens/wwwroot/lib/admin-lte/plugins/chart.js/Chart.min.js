/*!
 * Chart.js v3.9.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Chart=e()}(this,function(){"use strict";function t(t,e,i,s){let n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[s])):(n=t,i&&(n*=e.parentNode[s]/e[s])),n}function e(e,i,s){let n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*i[s])):n=e,n}const i=Object.freeze({__proto__:null,callback:function(t,e,i){if("function"==typeof t)return t.apply(i,e)},each:function(t,e,i,s){let n,o,a;if(Array.isArray(t))if(o=t.length,s)for(n=o-1;n>=0;n--)e.call(i,t[n],n);else for(n=0;n<o;n++)e.call(i,t[n],n);else if("object"==typeof t)for(a=Object.keys(t),o=a.length,n=0;n<o;n++)e.call(i,t[a[n]],a[n])},clone:function(t){if(Array.isArray(t))return t.map(i.clone);if("object"==typeof t&&null!==t){const e={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=i.clone(t[s]));return e}return t}});class s{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const n=t.listeners[s],o=t.duration;i.each(n,n=>{n[s](...e)&&(this._chartOnAnimationProgress(t,n),o&&this._chartOnAnimationComplete(t,n))})}notify(t,e,i,s){if(0===t.listeners.length)return;this._notify(t,e,i,"start"),this._notify(t,e,i,"progress"),this._notify(t,e,i,"complete")}_chartOnAnimationProgress(t,e){e.onAnimationProgress&&e.onAnimationProgress.call(e,t)}_chartOnAnimationComplete(t,e){e.onAnimationComplete&&e.onAnimationComplete.call(e,t)}_startDigest(){this._running=!0}_digest(){this._running&&(this._running=!1,this._lastDate=Date.now(),this._charts.forEach((t,e)=>{if(t.running&&t.items.length){t.items.forEach(e=>{e._update&&e._update()});const e=t.items.filter(t=>t._active);e.length&&this.notify(t,e,Date.now(),"progress")}t.items=t.items.filter(t=>t._active),0===t.items.length&&this._charts.delete(e)}),this._startDigest())}_getAnims(t){const e=this._charts.get(t);return e||(e={running:!1,items:[]},this._charts.set(t,e)),e}listen(t,e,i){this._getAnims(t).listeners=i,this._notify(t,[],Date.now(),e)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.running)return;e.running=!1}remove(t){return this._charts.delete(t)}_refresh(){this._request||(this._request=requestAnimationFrame(()=>{this._request=null,this._startDigest()}))}}const n=new s;function o(t){return"string"==typeof t&&(t=document.getElementById(t)),t&&t.canvas&&(t=t.canvas),t}const a={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseleave",pointerout:"mouseout"},r=t=>null===t||""===t;function l(t,e){const i=t.style,s=t.getAttribute("height"),n=t.getAttribute("width");if(t[e]={initial:{height:s,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"",i.boxSizing=i.boxSizing||"content-box",r(n)){const e=t.clientWidth;void 0!==e&&(t.width=e)}if(r(s))if(""===t.style.height)t.height=t.width/(2|0);else{const e=t.clientHeight;void 0!==e&&(t.height=e)}}const h=i.each;function c(t,e,i){const s=o(t);return s?function(t,e,i){let s,n,o,a,r;const l=t.getBoundingClientRect(),h=l.width/t.width,c=l.height/t.height;return h>1||c>1?(s=e*h,n=i*c,o=t.offsetLeft,a=t.offsetTop,r=l.left,(s-=r-o)>=0&&s<=t.width&&(n-=l.top-a)>=0&&n<=t.height?{x:s,y:n}:null):null}(s,e,i):null}function d(t,e){h(t,(t,i)=>{(e[i]||e._fallback)&&Object.assign(t,e[i]||e._fallback)})}function u(t,e,i){return t?function(t,e){return t.filter(t=>t.pos===e)}(t,e):i.filter(t=>t.axis===e)}function f(t,e){return i.each(t,t=>{const i=t.stack;return void 0===i||i===e})}function g(t){return t.filter(t=>!t.hidden)}function p(t,e){const i=t.filter(t=>!e.some(e=>t.type===e.type&&t.stack===e.stack));return[...e,...i]}function m(t){const e={};return t.forEach(t=>{const{stack:i,type:s,weight:n}=t;(!e[i]||n>e[i].weight)&&(e[i]={type:s,weight:n})}),e}function b(t){return t.reduce((t,e)=>Math.max(t,e.max),Number.NEGATIVE_INFINITY)}function x(t,e){const i=[];let s,n,o,a,r;for(s=0,n=t.length;s<n;++s)o=t[s],a=o.pos,r=+o.weight,a===e.start?i.unshift(o):a===e.end?i.push(o):r<e.weight&&i.splice(function(t,e){let i,s,n;for(i=0,s=t.length;i<s;++i)if(n=t[i],n.weight>e)break;return i}(i,r),0,o);return i}function _(t){const e=p(t,g(t.filter(f))),i=m(e),s=Object.keys(i),n=[];let o,a;for(o=0,a=s.length;o<a;++o){const t=s[o];n.push({pos:i[t].type,weight:e.filter(e=>e.stack===t).reduce((t,e)=>t+e.weight,0)})}return n}function y(t){return t.filter(t=>f(t)).reduce((t,e)=>Math.max(t,e.weight),0)}function v(t,e){const i=[];return h(t,t=>{t.forEach(t=>{i.push({axis:t,value:t.parse(e)})})}),i.sort((t,e)=>t.value-e.value),i.length?i[0].axis:void 0}function M(t,e){const i=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const t of e){if(t._stacks&&(!t._stacks||void 0===t._stacks[s]||void 0===t._stacks[s][i]))return;delete t[s]}}}function w(t,e){const i=n.charts,s=i.get(t);s&&(e.forEach(t=>{const e=s.listeners.filter(e=>e.event===t);e.forEach(t=>{i.unsubscribe(t.element,t.event,t.handler)})}),s.listeners=s.listeners.filter(t=>-1===e.indexOf(t.event)))}function k(t,e,i,s,n){const o=e.canvas,a=new MutationObserver(t=>{let e=!1;for(const i of t)e=e||"attributes"===i.type&&i.attributeName===s,i.addedNodes.forEach(t=>{e=e||t===o||t.contains&&t.contains(o)}),i.removedNodes.forEach(t=>{e=e||t===o||t.contains&&t.contains(o)});e&&n()});return a.observe(document,{childList:!0,subtree:!0,attributeFilter:[s]}),a}function S(t,e,i,s){const n=o(t),a=n&&c(n,e,i);return a?function(t,e){const i=a[t];return i?i(e):e}(s,a):null}const P=new Map;let D=0;function C(){const t=window.devicePixelRatio;t!==D&&(D=t,P.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function O(t,e){P.size||window.addEventListener("resize",C),P.set(t,e)}function A(t){P.delete(t),P.size||window.removeEventListener("resize",C)}function T(t,e,i){const s=t.canvas,n=s&&o(s);if(!n)return;const a=function(t,e){const i=k(t,e,"resize","char",()=>{e.currentDevicePixelRatio!==window.devicePixelRatio&&t()});return()=>{i.disconnect()}}(()=>{if(t.ctx){const s=function(t,e,i){let s,n;if(void 0===i||void 0===e)return!1;if(n=i.split&&i.split("."),s=e.split&&e.split("."),!n||!s)return!1;for(let t=0;t<n.length;t++){const e=parseInt(n[t],10),i=parseInt(s[t],10)||0;if(e>i)return!0;if(e<i)return!1}return!1}("3.0.0",i.version)?{width:n.clientWidth,height:n.clientHeight}:function(t,e){const i=e||{},s=i.devicePixelRatio||window.devicePixelRatio;return{width:Math.round(t.width*s),height:Math.round(t.height*s)}}(n,i);0===s.width&&0===s.height||t.resize(s.width,s.height)}},n);O(t,a),function(t,e){const i=t.canvas,s=i&&o(i);s&&l(s,e)}(t,e)}function L(t){A(t),function(t){const e=t.canvas;if(!e[t.id])return;const i=e[t.id].initial;["height","width"].forEach(t=>{const s=i[t];void 0===s||null===s?e.removeAttribute(t):e.setAttribute(t,s)});const s=i.style||{};Object.keys(s).forEach(t=>{e.style[t]=s[t]}),e.width=e.width,delete e[t.id]}(t)}function E(t,e){return t.native?{x:t.x,y:t.y}:S(t,e.chart.canvas,e.chart.currentDevicePixelRatio,"client")}function R(t,e,i){let s,n;if(void 0===e||void 0===i)return!1;if(n=i.split&&i.split("."),s=e.split&&e.split("."),!n||!s)return!1;for(let t=0;t<n.length;t++){const e=parseInt(n[t],10),i=parseInt(s[t],10)||0;if(e>i)return!0;if(e<i)return!1}return!1}let I=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function z(t,e){const i=a[t.type]||t.type,{x:s,y:n}=E(t,e);return{type:i,chart:e,native:t,x:void 0!==s?s:null,y:void 0!==n?n:null}}function F(t,e){for(const i of t)if(i===e||i.contains&&i.contains(e))return!0}function V(t,e,i){const s=t.canvas,n=new MutationObserver(t=>{let e=!1;for(const i of t)e=e||F(i.addedNodes,s),e=e||F(i.removedNodes,s);e&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}function B(t,e,i){const s=t.canvas,n=function(t,e){const i=k(t,e,"class","cls",()=>{e.attached&&t()});return()=>{i.disconnect()}}(()=>{null!==s.offsetParent&&i()},s);e.attached&&n(),n}function W(t,e,i){const s=t.canvas;if(!s)return;const n=function(t,e,i){const s=t.canvas,n=s&&o(s);if(!n)return;const a=function(t,e,i){let s;return"string"==typeof t?(s=parseInt(t,10),-1!==t.indexOf("%")&&(s=s/100*e.parentNode[i])):(s=t,i&&(s*=e.parentNode[i]/e[i])),s}(e,n,"height"),r=function(t,e,i){let s;return"string"==typeof t?(s=parseInt(t,10),-1!==t.indexOf("%")&&(s=s/100*e[i])):s=t,s}(i,n,"width");(n.height!==a||n.width!==r)&&t.resize(r,a)}(t,e,i),a=V(s,()=>{t.attached&&n()}),r=B(s,t,n);return()=>{a.disconnect(),r(),t.attached&&n()}}(t,e,i);return n}function N(t,e,i){const s=t.canvas,n=s&&o(s);if(!n)return;const a=n.getContext("2d",{willReadFrequently:!0});return a.save(),a.fillStyle=i||"#000",a.textAlign="left",a.textBaseline="top",a.font=e,a}function H(t,e,i,s){if(!e||"string"==typeof e)return e;const n=N(t,e.string,s);return n?(n.measureText(i).width,n.restore(),e.lineHeight*i.split("\n").length):0}function j(t,e,i,s){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function $(t,e,i,s){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function Y(t,e){return"center"===e?t.x+t.w/2:"right"===e?t.x+t.w:t.x}function U(t){return 0===t||1===t?t:-Math.cos(t*Math.PI)/2+.5}function X(t,e,i){return Math.abs(t-e)<i}function q(t,e,i){return Math.max(e,Math.min(i,t))}function K(t){return q(t,-32768,32767)}function G(t,e,i,s=1e-6){return t>=Math.min(e,i)-s&&t<=Math.max(e,i)+s}function Z(t,e,i){i=i||(i=>t[i]<e);let s,n=t.length-1,o=0;for(;n-o>1;)s=o+n>>1,i(s)?o=s:n=s;return{lo:o,hi:n}}const Q=(t,e,i,s)=>Z(t,i,s?s=>t[s][e]<=i:s=>t[s][e]<i),J=(t,e,i)=>Z(t,i,s=>t[s][e]>=i);function tt(t,e,i){let s=0,n=t.length;for(;s<n&&t[s]<e;)s++;for(;n>s&&t[n-1]>i;)n--;return s>0||n<t.length?t.slice(s,n):t}const et=["","k","M","G","T","P","E","Z","Y"];function it(t,e){const i=Math.pow(10,Math.floor(Math.log10(t))),s=t/i;return(s>=e?10:s>=5?5:s>=2?2:1)*i}function st(t){const e=Math.floor(Math.log10(Math.abs(t))),i=Math.round(t*Math.pow(10,-e))*Math.pow(10,e);return parseFloat(i.toPrecision(15))}function nt(t){return null==t}function ot(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function at(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function rt(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function lt(t,e){return rt(t)?t:e}function ht(t,e){return void 0===t?e:t}const ct=t=>"number"==typeof t&&t%1==0;function dt(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function ut(t,e,i,s){let n,o,a;if(ot(t))if(o=t.length,s)for(n=o-1;n>=0;n--)e.call(i,t[n],n);else for(n=0;n<o;n++)e.call(i,t[n],n);else if(rt(t))for(n=0;n<t;n++)e.call(i,n);else if(at(t))for(a=Object.keys(t),o=a.length,n=0;n<o;n++)e.call(i,t[a[n]],a[n])}function ft(t,e){let i,s,n,o;if(!t||!e||t.length!==e.length)return!1;for(i=0,s=t.length;i<s;++i)if(n=t[i],o=e[i],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function gt(t){if(ot(t))return t.map(gt);if(at(t)){const e=Object.create(null),i=Object.keys(t),s=i.length;let n=0;for(;n<s;++n)e[i[n]]=gt(t[i[n]]);return e}return t}function pt(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function mt(t,e,i,s){if(!pt(t))return;const n=e[t],o=i[t];at(n)&&at(o)?bt(n,o,s):e[t]=gt(o)}function bt(t,e,i){const s=ot(e)?e:[e],n=s.length;if(!at(t))return t;const o=(i=i||{}).merger||mt;for(let e=0;e<n;++e){const n=s[e];if(!at(n))continue;const a=Object.keys(n);for(let e=0,s=a.length;e<s;++e)o(a[e],t,n,i)}return t}function xt(t,e){return bt(t,e,{merger:_t})}function _t(t,e,i){if(!pt(t))return;const s=e[t],n=i[t];at(s)&&at(n)?xt(s,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=gt(n))}const yt={"\'":"\'",'"':'"',"`":"`"},vt=new RegExp("(['\"`])([^\\1]*)\\1","g");function Mt(t,e,i){if("string"!=typeof t)return t;const s=t.trim();if(s.length>1&&yt[s.charAt(0)]){const t=vt.exec(s);if(t)return t[2]}return i?wt(s):s}function wt(t){const e=t.indexOf(".");return-1===e?t:t.substr(0,e)}const kt=t=>"undefined"==typeof t,St=t=>"function"==typeof t,Pt=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};function Dt(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}const Ct=Math.PI,Ot=2*Ct,At=Ot+Ct,Tt=Number.POSITIVE_INFINITY,Lt=Ct/180,Et=180/Ct,Rt=Ct/2,It=Ct/4,zt=2*Ct/3,Ft=Math.log10,Vt=Math.sign;function Bt(t,e,i){return Math.abs(t-e)<i}function Wt(t){const e=Math.round(t);t=Bt(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(Ft(Math.abs(t)))),s=t/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function Nt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Ht(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function jt(t,e,i){let s,n,o;for(s=0,n=t.length;s<n;s++)o=t[s][i],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function $t(t){return t*(Ct/180)}function Yt(t){return t*(180/Ct)}function Ut(t){if(!rt(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function Xt(t,e){const i=e.x-t.x,s=e.y-t.y,n=Math.sqrt(i*i+s*s);let o=Math.atan2(s,i);return o<-.5*Ct&&(o+=Ot),{angle:o,distance:n}}function qt(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Kt(t,e){return(t-e+At)%Ot-Ct}function Gt(t){return(t%Ot+Ot)%Ot}function Zt(t,e,i,s){const n=Gt(t),o=Gt(e),a=Gt(i),r=Gt(s);return Gt(o-n)>Gt(a-n)?Gt(r-n)>Gt(a-n):Gt(r-n)<Gt(o-n)}function Qt(t,e,i){return Math.max(e,Math.min(i,t))}function Jt(t){return Qt(t,-32768,32767)}function te(t,e,i,s=1e-6){return t>=Math.min(e,i)-s&&t<=Math.max(e,i)+s}function ee(t,e,i){i=i||(i=>t[i]<e);let s,n=t.length-1,o=0;for(;n-o>1;)s=o+n>>1,i(s)?o=s:n=s;return{lo:o,hi:n}}const ie=(t,e,i,s)=>ee(t,i,s?s=>t[s][e]<=i:s=>t[s][e]<i),se=(t,e,i)=>ee(t,i,s=>t[s][e]>=i);function ne(t,e,i){let s=0,n=t.length;for(;s<n&&t[s]<e;)s++;for(;n>s&&t[n-1]>i;)n--;return s>0||n<t.length?t.slice(s,n):t}const oe=["","k","M","G","T","P","E","Z","Y"];function ae(t,e){const i=Math.pow(10,Math.floor(Math.log10(t))),s=t/i;return(s>=e?10:s>=5?5:s>=2?2:1)*i}function re(t){const e=Math.floor(Math.log10(Math.abs(t))),i=Math.round(t*Math.pow(10,-e))*Math.pow(10,e);return parseFloat(i.toPrecision(15))}var le={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}};const he=Object.keys(le);function ce(t,e){return t-e}function de(t,e){if(nt(e))return null;const i=t._adapter,{parser:s,round:n,isoWeekday:o}=t._parseOpts;let a=e;return"function"==typeof s&&(a=s(a)),rt(a)||(a="string"==typeof s?i.parse(a,s):i.parse(a)),null===a?null:(n&&(a="week"!==n||!ct(o)&&!1!==o?i.startOf(a,n):i.startOf(a,"isoWeek",o)),+a)}function ue(t,e){if(nt(e))return null;const i=t._adapter;return+i.startOf(e,t._unit)}function fe(t){return nt(t)?null:t}class ge{constructor(t){this._cache=t||{}}listen(t,e,i){const s=this._cache.all=this._cache.all||[];let n=this._cache[t]=this._cache[t]||[];n.includes(e)||(n.push(e),s.push({event:t,element:e,handler:i}))}unsubscribe(t,e,i){const s=this._cache.all;if(!s)return;const n=this._cache[t];if(!n)return;const o=n.indexOf(e);if(-1!==o&&n.splice(o,1),i){const t=s.findIndex(t=>t.element===e&&t.event===t&&t.handler===i);-1!==t&&s.splice(t,1)}}remove(t){if(!this._cache.all)return;delete this._cache[t],this._cache.all=this._cache.all.filter(e=>e.event!==t)}}function pe(t){return"string"==typeof t?t:t.render()}class me{constructor(t,e){this.chart=t,this._sortedMetasets=[],this.initialize(e)}initialize(t){this.beforeInit(t,this.chart.options),this.chart.platform.acquireContext(this.chart.canvas,t),this.initConfig(t),this.bindEvents(),this.afterInit()}acquireContext(t,e){}initConfig(t){this._config=this.resolveObjectKey(t),this._scopeKeys=this.resolveObjectKey(t.options),this._resolverCache=new Map}afterInit(){}beforeInit(){}bindEvents(){this.chart.platform.addEventListener(this.chart,"click",this._onClick.bind(this)),this.chart.platform.addEventListener(this.chart,"dblclick",this._onDoubleClick.bind(this))}unbindEvents(){this.chart.platform.removeEventListener(this.chart,"click",this._onClick),this.chart.platform.removeEventListener(this.chart,"dblclick",this._onDoubleClick)}updateHoverStyle(t,e,i){const s=i?"setHoverStyle":"removeHoverStyle";this._setStyle(t,e,s)}onHover(t,e,i){this.chart.getElementsAtEventForMode&&this.chart.getElementsAtEventForMode(t,this.chart.options.interaction.mode,this.chart.options.interaction,!1).forEach(t=>{this.updateHoverStyle(t.element,t.datasetIndex,!0)})}getDatasetMeta(t){const e=this.chart.data.datasets[t],i=this._metasets[t];return i&&i._dataset===e||(i=this._metasets[t]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1}),i}getMeta(){return this.getDatasetMeta(this.index)}getParsed(t){return this._cachedMeta._parsed[t]}getDatasetItem(t){return this._cachedMeta.data[t]}getStyle(t,e){return this._resolveElementOptions(this.getDatasetItem(t),t,e?"hover":"active")}getContext(t,e,i){return this._getContext(t,e,i)}resolveDatasetElementOptions(t){return this._resolveElementOptions(null,t,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.getDatasetItem(t),t,e)}resolveElementOptions(t,e){return this._resolveElementOptions(t,e,e)}_getContext(t,e,i){let s;return s=t>=0&&this._cachedMeta.data[t]?this._cachedMeta.data[t].$context:this._cachedMeta.$context,s&&s.parsed&&(s.parsed=this._cachedMeta._parsed[t]),s&&s.raw&&(s.raw=this.chart.data.datasets[this.index].data[t]),s.active=!!e,s.mode=i,s}_resolveElementOptions(t,e,i){const s=this.chart,n=s.data.datasets[this.index],o=t&&t.options||this._resolveDatasetElementOptions(e,i),a=this._sharedOptions(o),r=this._includeOptions(i,a);return r&&(o.$shared=a),o}_resolveDatasetElementOptions(t,e){const i=this,s=i.chart,n=i._cachedMeta,o=n.type,a=`${o}ElementOptions`,r=s.options.elements[o]||{},l=i._resolverCache.get(a)||new Map;if(l.has(e))return l.get(e);const h=Object.assign({},r,this.getDataset());h.hover=Object.assign({},h.hover||{},s.options.interaction.hover||{}),h.active=Object.assign({},h.active||{},s.options.interaction.active||{});const c=this._createResolver(h,!0,e);return l.set(e,c),i._resolverCache.set(a,l),c}_createResolver(t,e,i){const s=this.chart.options.scriptable;return s?this._resolveWithContext(t,this._getContext(i,e,i),s):this._resolveWithPrefixes(t,this._prefixes,s)}_resolveWithContext(t,e,i){const{context:s,subContext:n}=e,o=this._cachedDataOpts;if(o[s]&&o[s].subContext===n)return o[s].options;const a=this._createResolver(t,!0,s);return a.$context=e,a.$subContext=n,o[s]={options:a,subContext:n},a}_resolveWithPrefixes(t,e,i){const s=this._cachedDataOpts,n=e.join();if(s[n])return s[n];const o=this._createResolver(t,!1,void 0,e);return s[n]=o,o}_sharedOptions(t){if(!t.$shared)return;const e=this._sharedOptionKeys||(this._sharedOptionKeys=this._resolveDatasetElementOptions(void 0,"active").scriptable);if(!e)return;const i={};for(const s of e)i[s]=t[s];return i}_includeOptions(t,e){return!e||"resize"===t||this.chart.options.responsive&&this.chart.options.maintainAspectRatio}updateElement(t,e,i,s){"reset"===s?Object.assign(t,this.resolveDataElementOptions(e,s)):this._resolveAnimations(e,s,i).update(t,this.resolveDataElementOptions(e,s))}updateElements(t,e,i,s){const n=this._resolveAnimations(e,s,i);for(let i=e;i<e+t.length;i++)n.update(t[i],this.resolveDataElementOptions(i,s))}_resolveAnimations(t,e,i){const s=this.chart,n=this._cachedDataOpts,o=`animation-${e}`,a=n[o];if(a)return a;let r;if(!1!==s.options.animation){const s=this.chart.config,n=s.datasetAnimationScopeKeys(this._type,e),o=s.getOptionScopes(this.getDataset(),n);r=s.createResolver(o,this.getContext(t,i,e))}const l=new n.Animation(s,r&&r.animations);return r&&r._cacheable&&(n[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||"resize"===t||this.chart.options.responsive&&this.chart.options.maintainAspectRatio}updateSharedOptions(t,e,i){t.$shared&&n.notify(this,{target:this.chart,type:"update",mode:e},i)}removeHoverStyle(t,e,i){this._setStyle(t,i,"removeHoverStyle",!0)}setHoverStyle(t,e,i){this._setStyle(t,i,"setHoverStyle",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"removeHoverStyle",!0)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"setHoverStyle",!0)}_setStyle(t,e,i,s){if(t.active=s,this.chart.options.hover.enabled||this.chart.options.animation){const s=this.chart.options.elements[t.type]||{};t[i]&&t[i](this.resolveElementOptions(t,e,s),this.chart.ctx)}}_resolveDatasetElementOptions(t,e){return this._resolveElementOptions(this._cachedMeta.dataset,t,e)}parse(t,e){const i=this.chart,s=i.data.datasets[this.index],n=this._cachedMeta,o=n._parsed,a=n._sorted&&e===o.length,r=t||0,l=e||s.data.length;let h,c,d;if(!1===s.parsing)h=s.data;else{h=[];for(let t=r;t<l;++t)d=s.data[t],at(d)?h.push(this.parseObjectData(i,d,t,e)):h.push(this.parsePrimitiveData(i,d,t,e))}for(c=0;c<h.length;++c)o[r+c]=h[c];a&&(n._sorted=!0)}parsePrimitiveData(t,e,i,s){return e}parseObjectData(t,e,i,s){return e}getParsed(t){return this._cachedMeta._parsed[t]}getDatasetItem(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,n=this._cachedMeta,o=e[t.axis],a=n.controller.getParsed(i),r={keys:p(s,!0),values:e._stacks[t.axis]};return function(t,e,i,s){const n=t[e]||(t[e]={}),o=n[i]||(n[i]={});return o[s]||(o[s]={})}(r.values,a[t.axis],n.type,n.index)[t.axis]=o,r}updateRangeFromParsed(t,e,i,s){const n=i[e.axis];let o=null===n?NaN:n;const a=s&&i._stacks[e.axis];s&&a&&(s.values=a,o=this.applyStack(e,s,i).values[e.axis]),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,n=i._sorted&&t===i._lastAxis,o=!!e&&i._stacks[t.axis],a={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:r,max:l}=this._getOtherScale(t);let h,c;function d(){c=s[h];const e=c[t.axis];return!rt(c[r])||!rt(c[l])||e<a.min||e>a.max}for(h=0;h<s.length&&(d()||(this.updateRangeFromParsed(a,t,c,o),!n));++h);if(n)for(h=s.length-1;h>=0;--h)if(!d()){this.updateRangeFromParsed(a,t,c,o);break}return a}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,n,o;for(s=0,n=e.length;s<n;++s)o=e[s][t.axis],rt(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,n=this.getParsed(t);return{label:i?""+(i.getLabelForValue?i.getLabelForValue(n[i.axis]):n[i.axis]):"",value:s?""+(s.getLabelForValue?s.getLabelForValue(n[s.axis]):n[s.axis]):""}}initialize(){this.beforeInit(),this._cachedMeta=this.getMeta(),this.chart.sortedMetasets.push(this._cachedMeta),this._cachedDataOpts={},this.enableOptionSharing&&(this._sharedOptions={}),this._cachedDataOpts.animation=new Map,this.addElements(),this.afterInit()}addElements(){const t=this._cachedMeta;this.datasetElementType&&(t.dataset=new this.datasetElementType),t.data=this.dataElementType?this.buildOrUpdateElements():[]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._parseDatasetOptions(i),this._cachedDataOpts.parsing=!1,this.parse(t,e._parsed.length),s=this._cachedMeta._parsed.length<i.data.length,e._sorted=!1,s&&this._insertElements(e._parsed.length,i.data.length-e._parsed.length),this._resyncElements(t)}_insertElements(t,e){const i=this._cachedMeta,s=i.data,n=t+e;let o;const a=this.getDataset().data;for(o=n;o<a.length;o++)s[o]=new this.dataElementType;i._parsed.splice(t,0,...new Array(e)),this._cachedDataOpts.parsing&&this._cachedDataOpts.parsed.splice(t,0,...new Array(e))}_resyncElements(t){const e=this._cachedMeta,i=e.data,s=this.getDataset().data;i.length>s.length?this._removeElements(s.length,i.length-s.length):s.length>i.length&&this._insertElements(i.length,s.length-i.length),this._cachedDataOpts.parsing=!1,this.parse(t,e._parsed.length)}_removeElements(t,e){const i=this._cachedMeta;if(this._cachedDataOpts.parsing){const s=i._parsed.splice(t,e);this._cachedDataOpts.parsed&&this._cachedDataOpts.parsed.splice(t,e)}i.data.splice(t,e)}insertElements(t,e){const i=this._cachedMeta.data;return i.splice(t,0,...new Array(e).fill(null).map(()=>new this.dataElementType)),this._cachedDataOpts.parsing&&(this._cachedMeta._parsed.splice(t,0,...new Array(e)),this._cachedDataOpts.parsed&&this._cachedDataOpts.parsed.splice(t,0,...new Array(e))),this.parse(t,e),this.updateElements(i,t,e,"reset"),i.slice(t,t+e)}updateElements(t,e,i,s){}removeElements(t,e){const i=this._cachedMeta;if(this._cachedDataOpts.parsing){const s=i._parsed.splice(t,e);this._cachedDataOpts.parsed&&this._cachedDataOpts.parsed.splice(t,e)}i.data.splice(t,e)}_onDataPush(){const t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)}_onDataPop(){this.removeElements(this._cachedMeta.data.length-1,1)}_onDataShift(){this.removeElements(0,1)}_onDataSplice(t,e){e&&this.removeElements(t,e);const i=arguments.length-2;i&&this.insertElements(t,i)}_onDataUnshift(){this.insertElements(0,arguments.length)}remove(){this._cachedMeta.dataset&&this._cachedMeta.dataset.destroy(),this.removeElements(0,this._cachedMeta.data.length)}destroy(){this.remove(),this._cachedMeta.controller=null,delete this.chart.ctx.datasets[this.index]}reset(){this._removeDatasetHoverStyle(),this.removeElements(0,this._cachedMeta.data.length),this.addElements(),this.buildOrUpdateElements()}isHidden(){return!this._cachedMeta.visible}setHidden(t){this._cachedMeta.visible=!t}getDataset(){return this.chart.data.datasets[this.index]}getDatasetMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}getValueScale(){return this._cachedMeta.vScale}getIndexScale(){return this._cachedMeta.iScale}getValueScaleId(){return this._cachedMeta.vAxisID}getIndexScaleId(){return this._cachedMeta.iAxisID}_onClick(t){const e=this.chart,i=e.getElementsAtEventForMode(t,e.options.interaction.mode,e.options.interaction,!1),s=Dt(t);this._handleEvent(t,i,s)}_onDoubleClick(t){const e=this.chart,i=e.getElementsAtEventForMode(t,e.options.interaction.mode,e.options.interaction,!1);this._handleEvent(t,i,!0)}_handleEvent(t,e,i){const s=this.chart.options.onHover,n=this.chart.options.onClick;s&&!i&&s.call&&s.call(this.chart,t,e,this.chart),n&&i&&n.call&&n.call(this.chart,t,e,this.chart)}}me.defaults={},me.datasetElementType=null,me.dataElementType=null;class be{constructor(t,e){this.chart=t,this._ctx=e,this.data=t.data,this.datasets=t.data.datasets||[],this.labels=t.data.labels||[]}initialize(){return this}beforeInit(){}afterInit(){}beforeUpdate(){}afterUpdate(){}beforeElementsUpdate(){}afterElementsUpdate(){}beforeDatasetsUpdate(){}afterDatasetsUpdate(){}beforeDatasetUpdate(){}afterDatasetUpdate(){}beforeRender(){}afterRender(){}beforeDraw(){}afterDraw(){}beforeTooltipDraw(){}afterTooltipDraw(){}beforeEvent(){}afterEvent(){}beforeResize(){}afterResize(){}beforeDestroy(){}afterDestroy(){}uninstall(){}}class xe{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Nt(this.x)&&Nt(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(t=>{s[t]=i[t]&&i[t].active()?i[t]._to:this[t]}),s}}xe.defaults={},xe.defaultRoutes=void 0;const _e={values:t=>ot(t)?t:""+t,numeric(t,e,i){if(0===t)return"0";const s=this.chart.options.locale;let n,o=t;if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(n="scientific"),o=function(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t));return i}(t,i)}const a=Ft(Math.abs(o)),r=Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:n,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(l,this.options.ticks.format),t.toLocaleString(s,l)}};var ye={formatters:_e};const ve=Object.create(null),Me=Object.create(null);function we(t,e){if(!e)return t;const i=e.split(".");for(let e=0,s=i.length;e<s;++e){const s=i[e];t=t[s]||(t[s]=Object.create(null))}return t}function ke(t,e,i){return"string"==typeof e?bt(we(t,e),i):bt(we(t,""),e)}class Se{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>ht(e.backgroundColor,e.borderColor,e.color),this.hoverBorderColor=(t,e)=>ht(e.borderColor,e.backgroundColor,e.color),this.hoverColor=(t,e)=>ht(e.color,e.backgroundColor),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ke(this,t,e)}get(t){return we(this,t)}describe(t,e){return ke(Me,t,e)}override(t,e){return ke(ve,t,e)}route(t,e,i,s){const n=we(this,t),o=we(this,i),a="_"+e;Object.defineProperties(n,{[a]:{value:n[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=o[s];return at(t)?bt(Object.create(null),[e,t]):ht(t,e)},set(t){this[a]=t}}})}apply(t){t.forEach(t=>t(this))}}var Pe=new Se({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[(function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})}),(function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}),(function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ye.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.grid","borderColor","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t,_scriptable:t=>"beforeUpdate"!==t&&"afterUpdate"!==t&&"beforeSetDimensions"!==t&&"afterSetDimensions"!==t&&"beforeDataLimits"!==t&&"afterDataLimits"!==t&&"beforeBuildTicks"!==t&&"afterBuildTicks"!==t&&"beforeTickToLabelConversion"!==t&&"afterTickToLabelConversion"!==t&&"beforeCalculateLabelRotation"!==t&&"afterCalculateLabelRotation"!==t&&"beforeFit"!==t&&"afterFit"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_indexable:t=>"backdropPadding"!==t})}),(function(t){t.set("controllers",{}),t.describe("controllers",{_fallback:!1,_indexable:!1,_scriptable:!1})}),(function(t){t.set("elements",{}),t.describe("elements",{_fallback:"plugins",_indexable:!1})}),(function(t){t.set("plugins",{}),t.describe("plugins",{_fallback:!1,_indexable:!1})})]);class De{constructor(){this._init=[]}notify(t,e,i,s){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const n=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(n,t,e,i);return"afterDestroy"===e&&(this._notify(n,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,s){s=s||{};for(const n of t){const t=n.plugin;if(!1===dt(t[i],[e,s,n.options],t)&&s.cancelable)return!1}return!0}invalidate(){nt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=ht(i.options&&i.options.plugins,{}),n=function(t){const e={},i=[],s=Object.keys(Pe.plugins),n=Object.keys(t);for(let t=0;t<n.length;t++){const o=n[t];if(-1===s.indexOf(o)){const t=o;e[t]=Pe.plugins[t],i.push(t)}}return{plugins:e,localIds:i}}(s);return!1!==e&&function(t,e,i){const s=[],n=t.plugins||[];for(let t=0;t<n.length;t++){const o=n[t];-1===e.indexOf(o)&&(s.push(o),i[o.id]=o)}return s}(i,n.localIds,n.plugins)||[],this._createDescriptors(s,n.plugins,e)}_createDescriptors(t,e,i){const s=ht(t,{}),n=[];for(const t in e){const o=e[t];if("function"==typeof o&&((i?o.id:o.id||o._id)||console.warn(`Invalid plugin object supplied to ChartJS. Plugin object must define an id property.`),!n.find(e=>e.plugin.id===o.id))){const e=s[o.id];!1!==e&&(!0===e&&(e={}),n.push({plugin:o,options:function(t,e){if(!1===t)return null;if(!0===t)return{};let i=t;return ot(t)&&(i={}),i}(e,o)}))}}return n}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=t=>t.plugin.id,n=function(t,e){const i=new Set;for(const s of t)i.add(s);for(const t of e)i.has(t)||i.add(t);return Array.from(i)}(e.map(s),i.map(s));this._notify(n.map(t=>e.find(e=>e.plugin.id===t)||i.find(e=>e.plugin.id===t)).filter(Boolean),t,"stop"),this._notify(n.map(t=>i.find(e=>e.plugin.id===t)).filter(Boolean),t,"start")}}const Ce=new De;class Oe{constructor(){this._objects=new Map}add(...t){for(const e of t)this._objects.set(e.id,e)}get(t){return this._objects.get(t)}unregister(...t){for(const e of t)this._objects.delete(e.id)}}var Ae=new Oe;class Te{constructor(){this.controllers=Ae.controllers=new Oe,this.elements=Ae.elements=new Oe,this.plugins=Ae.plugins=new Oe,this.scales=Ae.scales=new Oe,this._typedRegistries=[this.controllers,this.scales,this.elements].filter(t=>t.type)}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeController(t){return this._each("unregister",[t],this.controllers)}removeElement(t){return this._each("unregister",[t],this.elements)}removePlugin(t){return this._each("unregister",[t],this.plugins)}removeScale(t){return this._each("unregister",[t],this.scales)}_each(t,e,i){[...e].forEach(e=>{const s=i||this._getRegistryForType(e);s&&s[t](e)})}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(this._typeMatches(t,i))return i}return this._handleUnknownType(t)}_handleUnknownType(t){return console.warn(`Unknown type: '${t}', assuming generic type.`),this.plugins}_typeMatches(t,e){return t.constructor&&t.constructor.type&&t.constructor.type===e.type}_get(t,e,i){const s=e.get(t);return void 0===s&&console.warn(`'${t}' is not a registered ${i}.`),s}}var Le=new Te;class Ee{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const n=t.listeners[s],o=t.duration;h(n,n=>{n[s](...e)&&(this._chartOnAnimationProgress(t,n),o&&this._chartOnAnimationComplete(t,n))})}notify(t,e,i,s){if(0===t.listeners.length)return;this._notify(t,e,i,"start"),this._notify(t,e,i,"progress"),this._notify(t,e,i,"complete")}_chartOnAnimationProgress(t,e){e.onAnimationProgress&&e.onAnimationProgress.call(e,t)}_chartOnAnimationComplete(t,e){e.onAnimationComplete&&e.onAnimationComplete.call(e,t)}_startDigest(){this._running=!0}_digest(){this._running&&(this._running=!1,this._lastDate=Date.now(),this._charts.forEach((t,e)=>{if(t.running&&t.items.length){t.items.forEach(e=>{e._update&&e._update()});const e=t.items.filter(t=>t._active);e.length&&this.notify(t,e,Date.now(),"progress")}t.items=t.items.filter(t=>t._active),0===t.items.length&&this._charts.delete(e)}),this._startDigest())}_getAnims(t){const e=this._charts.get(t);return e||(e={running:!1,items:[]},this._charts.set(t,e)),e}listen(t,e,i){this._getAnims(t).listeners=i,this._notify(t,[],Date.now(),e)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.running)return;e.running=!1}remove(t){return this._charts.delete(t)}_refresh(){this._request||(this._request=requestAnimationFrame(()=>{this._request=null,this._startDigest()}))}}const Re=new Ee;return{Chart:class{constructor(t,e){const i=this.config=new Se(e),s=o(t);if(!s)throw new Error("Failed to create chart: can't acquire context from the given item");this.platform=new(i.platform||function(t){return!kt("undefined"!=typeof window)&&"undefined"!=typeof CanvasRenderingContext2D?t:null}()||class{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}releaseContext(){return!0}addEventListener(){}removeEventListener(){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(){return!0}updateConfig(){}}),this.ctx=s,this.canvas=s&&s.canvas,this.width=void 0,this.height=void 0,this._options=i.options,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new De,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t){let e;return(...i)=>{e||(e=requestAnimationFrame(()=>{e=null,t(...i)}))}},this._dataChanges=[],Le.notify(this,"construct",this),this.initialize()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:n}=this;return nt(t)?e&&n?n:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Le}initialize(){return Le.notify(this,"beforeInit"),ht(this.options.responsive,Pe.responsive)&&this.platform.acquireContext(this.canvas,this.options)&&(this.attached=!0,this.resize()),this.initializePlugins(),Le.notify(this,"afterInit"),this}clear(){return function(t,e){t.save(),t.globalCompositeOperation="copy",t.fillStyle=e.backgroundColor,t.fillRect(0,0,e.width,e.height),t.restore()}(this.ctx,this),this}stop(){return Re.stop(this),this}resize(t,e){return Re.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e),this}_resize(t,e){const i=this.options,s=this.canvas,n=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,n),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),r=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,function(t,e,i){const s=t.canvas,n=Math.max(0,Math.floor(e)),o=Math.max(0,Math.floor(i));if(s.width===n&&s.height===o)return;s.width=n,s.height=o;const a=s.getContext("2d");a&&a.scale(e/n,i/o)}(this,this.width,this.height),this.currentDevicePixelRatio=a,this.chartArea=void 0,Le.notify(this,r,{size:o})}ensureScalesHaveIDs(){h(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((t,e)=>(t[e]=!1,t),{});let n=[];e&&(n=n.concat(Object.keys(e).map(t=>{const i=e[t],s=function(t,e){return"x"===t?"category":"y"===t?"linear":e}(t,i.type);return{options:i,dposition:"chartArea"===i.position?"bottom":i.position,dtype:s}}))),h(n,(e,n)=>{const o=e.options,a=o.id,r=function(t,e){return"x"===t?"category":"y"===t?"linear":e}(a,o.type);if(void 0!==o.position&&function(t,e,i){return"top"===t||"bottom"===t?-1!==["top","bottom"].indexOf(e):"left"===t||"right"===t?-1!==["left","right"].indexOf(e):e===t}(o.position,e.dposition))throw new Error(`Invalid scale configuration for scale: ${a}`);s[a]=!0;let l=null;if(a in i&&i[a].type===r)l=i[a];else{const t=Le.getScale(r);l=new t({id:a,type:r,ctx:this.ctx,chart:this}),i[l.id]=l}l.init(o,t.options)}),h(s,(t,e)=>{t||delete i[e]}),h(i,t=>{t.configure(this,this.options.scales[t.id],this.options)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this.removeControllers(e),i=0,s=e.length;i<s;i++){const s=e[i];let n=this.getDatasetMeta(i);const o=s.type||this.config.type;if(n.type&&n.type!==o&&(this.destroyDatasetMeta(i),n=this.getDatasetMeta(i)),n.type=o,n.indexAxis=s.indexAxis||function(t){const e=t.options.indexAxis||"x";return"x"===e||"y"===e?e:"x"}(this.options),n.order=s.order||0,n.index=i,n.label=""+s.label,n.visible=this.isDatasetVisible(i),n.controller)n.controller.updateIndex(i),n.controller.linkScales();else{const e=Le.getController(o),a=void 0!==this.options.datasets[o]?this.options.datasets[o]:{};n.controller=new e(this,i),h(a,(t,e)=>{n.controller[e]=t}),t.push(n.controller)}}return this.notifyPlugins("afterBuildOrUpdateControllers",{controllers:t}),t}removeControllers(t){h(this._metasets,(e,i)=>{i>=t.length&&(e.controller&&(e.controller.destroy(),delete e.controller),delete this._metasets[i])})}resetElements(){h(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this.resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;this.tooltip&&this.tooltip.initialize&&this.tooltip.initialize(),this.ensureScalesHaveIDs(),this.buildOrUpdateScales(),this.initializePlugins(),this.notifyPlugins("afterScaleUpdate");const n=this.buildOrUpdateControllers();if(this.notifyPlugins("afterBuildOrUpdateControllers",{controllers:n}),h(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.buildOrUpdateElements(t)},this),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(function(t,e){return t.z-e.z}),this._lastEvent&&this.eventHandler(this._lastEvent,!0),this.render(),s){const t=this._listeners;h(t,(t,e)=>{this.canvas.removeEventListener(e,t)}),this._listeners={}}}notifyPlugins(t,e){return this._plugins.notify(this,t,e)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}render(){if(this.notifyPlugins("beforeRender",{cancelable:!0})===!1)return;if(Re.has(this)){if(this.attached&&!Re.running(this))Re.start(this)}else{this.draw(),this.attached&&!this._animationsDisabled&&Re.start(this)}}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this.drawDatasets(),++t;t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;for(let t=this.data.datasets.length-1;t>=0;--t)this.isDatasetVisible(t)&&this.drawDataset(t);this.notifyPlugins("afterDatasetsDraw")}drawDataset(t){const e=this.getDatasetMeta(t),i={meta:e,index:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(e.controller.draw(),this.notifyPlugins("afterDatasetDraw",i))}isAnimationDisabled(){return this._animationsDisabled||!this.options.animation}eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i))return;const n=this._handleEvent(t,e,i.inChartArea);return i.result=n,this.notifyPlugins("afterEvent",i),i.result}_handleEvent(t,e,i){const{_active:s=[],options:n}=this,o=e,a=this._getActiveElements(t,s,i,o),r=Dt(t),l=function(t,e,i,s){return i&&"mouseout"!==t.type?s?e:t:null}(t,a,i,r);i&&(this._lastEvent.native=t.native,this._lastEvent.x=t.x,this._lastEvent.y=t.y),this._handleHover(l,a,o)&&(this._active=a),this._updateHoverStyles(a,s,o);return l}_getActiveElements(t,e,i,s){if("mouseout"===t.type)return[];if(!i)return e;const n=this.options.hover;return this.getElementsAtEventForMode(t,n.mode,n,s)}}static get defaults(){return Pe}static get instances(){return ve}static get overrides(){return Me}static get registry(){return Le}static get version(){return"3.9.1"}static getChart(t){const e=o(t);if(e)return Object.values(ve).filter(t=>t.canvas===e)[0]}static register(...t){Le.add(...t),Ie()}static unregister(...t){Le.remove(...t),Ie()}}};function Ie(){Le._each("add",Array.from(arguments))}});